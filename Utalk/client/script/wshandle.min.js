"use strict";window.utalk=window.utalk||{},function(){function e(e,n){if("string"==typeof n)return e.getHours()+n+e.getMinutes()+n+e.getSeconds();console.log("the second argument should be string")}var n=function(e,n){this.socket=e,this.nick=n};n.prototype={listen:function(e,n){this.socket.on(e,n)},clearInput:function(e,n){if(e instanceof Array)for(var t=0;t<e.length;t++)e[t].value="";else alert(e+"不是数组");n&&n.focus()},getDate:function(n,t,i){var o={from:n.value.toString().trim(),to:t.value.toString().trim()||"all",m:i.value.toString().trim(),time:e(new Date,"-")};return 0==o.m.indexOf("@")&&(o.to=o.m.match(/^@(\S+\s*)/)[1].trim(),o.m=o.m.match(/^@(\S+\s*)/).input.replace("@"+o.to,""),o.command="@"),0==o.m.indexOf(">")&&(o.to=o.m.match(/^>(\S+\s*)/)[1].trim(),o.m=o.m.match(/^>(\S+\s*)/).input.replace(">",""),o.command=">",console.log(o)),o},getClients:function(e){this.socket.emit("getClients",function(n){console.log(n),e.innerHTML='<option value="all" selected>all</option>';for(var t in n)n.hasOwnProperty(t)&&t!=this.nick&&(e.innerHTML+='\n                            <option value="'+t+'">'+t+"</option>\n                        ")}.bind(this))},sendMessage:function(e,n){e instanceof Object&&n instanceof Function&&this.socket.emit("message",e,n)},sendLocalSearch:function(e,n){e instanceof Object&&n instanceof Function&&this.socket.emit("localSearch",e,n)},formatImageSet:function(e){var n=this;if(e instanceof Array){var t=document.createElement("div");t.className="imgset remote";for(var i=0;i<e.length;i++){var o=document.createElement("img");if(o.className="img img"+i,console.log(e[i].imgSrc),o.src=n.decodeBaiduImageUrl(e[i].imgSrc),console.log(o.src),o.title=e[i].title,o.setAttribute("test",e[i].fromSite),t.appendChild(o),i==e.length-1)return t}}else console.log("error")},searchBaiduImage:function(e,n){var t=new XMLHttpRequest;t.open("GET","http://image.baidu.com/search/acjson?tn=resultjson_com&ipn=rj&ct=201326592&is=&fp=result&queryWord="+e+"&cl=&lm=&ie=utf-8&oe=utf-8&adpicid=&st=&z=&ic=&word="+e+"&s=&se=&tab=&width=&height=&face=&istype=&qc=&nc=&fr=&pn=60&rn=30&gsm=1e&1493171544246=",!0),t.onreadystatechange=function(){if(4!=t.readyState||200!=t.status)return null;var e=JSON.parse(t.responseText).data;console.log(e);for(var i=[],o=0;o<e.length;o++){var s=e[o].fromPageTitleEnc,a=e[o].replaceUrl?e[o].replaceUrl[1]?e[o].replaceUrl[1]:e[o].replaceUrl[0]:null;a&&i.push({title:s,fromSite:a.FromURL,imgSrc:e[o].objURL}),o==e.length-1&&n(i)}},t.send()},decodeBaiduImageUrl:function(e){var n={w:"a",k:"b",v:"c",1:"d",j:"e",u:"f",2:"g",i:"h",t:"i",3:"j",h:"k",s:"l",4:"m",g:"n",5:"o",r:"p",q:"q",6:"r",f:"s",p:"t",7:"u",e:"v",o:"w",8:"1",d:"2",n:"3",9:"4",c:"5",m:"6",0:"7",b:"8",l:"9",a:"0",_z2C$q:":","_z&e3B":".",AzdH3F:"/"},t=e,i=t.replace(/(_z2C\$q|_z&e3B|AzdH3F)/g,function(e,t){return n[t]});return i=i.replace(/([a-w\d])/g,function(e,t){return n[t]})},showAlert:function(e,n){n.time,n.m},showSearchResult:function(e,n){if(console.log(n),n.command&&">"==n.command)return e.appendChild(n.m),e.scrollTop=e.scrollHeight,!0},showMessage:function(e,n,t){if(t)var i='\n                    <div class="remote">\n                        <div class="name">\n                            <span>'+n.from+'</span><span class="time">'+n.time+'</span>\n                        </div>\n                        <div class="message">\n                            <span>'+n.m+"</span>\n                        </div>\n                    </div>\n                    ";else var i='\n                    <div class="local">\n                        <div class="name">\n                            <span>'+n.from+'</span><span class="time">'+n.time+'</span>\n                        </div>\n                        <div class="message">\n                            <span>'+n.m+"</span>\n                        </div>\n                    </div>\n                    ";return e.innerHTML+=i,e.scrollTop=e.scrollHeight,!0}},utalk.wsHandle=n}();
//# sourceMappingURL=wshandle.min.js.map
